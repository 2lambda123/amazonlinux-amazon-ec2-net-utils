From 7280ff5206eeed978d4b7f563475e5eba16babab Mon Sep 17 00:00:00 2001
From: Noah Meyerhans <nmeyerha@amazon.com>
Date: Wed, 6 Mar 2024 11:37:11 -0800
Subject: [PATCH] change the priority of the networkd configs

ensure they're order before netplan
---
 lib/lib.sh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/lib/lib.sh b/lib/lib.sh
index c9f1970..8933d7c 100644
--- a/lib/lib.sh
+++ b/lib/lib.sh
@@ -151,7 +151,7 @@ create_ipv4_aliases() {
     local addresses
     subnet_supports_ipv4 "$iface" || return 0
     addresses=$(get_iface_imds $mac local-ipv4s | tail -n +2 | sort)
-    local drop_in_dir="${unitdir}/70-${iface}.network.d"
+    local drop_in_dir="${unitdir}/07-${iface}.network.d"
     mkdir -p "$drop_in_dir"
     local file="$drop_in_dir/ec2net_alias.conf"
     local work="${file}.new"
@@ -210,7 +210,7 @@ create_rules() {
     local family=$4
     local addrs prefixes
     local local_addr_key subnet_pd_key
-    local drop_in_dir="${unitdir}/70-${iface}.network.d"
+    local drop_in_dir="${unitdir}/07-${iface}.network.d"
     mkdir -p "$drop_in_dir"
 
     local -i ruleid=$((device_number+rule_base+100*network_card))
@@ -373,7 +373,7 @@ create_interface_config() {
 
     local -i retval=0
 
-    local cfgfile="${unitdir}/70-${iface}.network"
+    local cfgfile="${unitdir}/07-${iface}.network"
     if [ -e "$cfgfile" ]; then
         debug "Using existing cfgfile ${cfgfile}"
         echo $retval
-- 
2.25.1

